<!DOCTYPE html>
<html>
  <head>
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
    <script src="https://raw.githack.com/fcor/arjs-gestures/master/dist/gestures.js"></script>
    <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
    <style>
      #score {
        position: absolute;
        bottom: 10px;
        left: 50%;
        transform: translateX(-50%);
        background-color: rgba(0, 0, 0, 0.7);
        color: #00FF00;
        padding: 20px;
        border-radius: 10px;
        font-size: 30px;
        font-weight: bold;
        border: 2px solid #FFD700;
      }

      #message {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background-color: rgba(0, 0, 0, 0.7);
        color: #FFD700;
        padding: 30px;
        border-radius: 10px;
        font-size: 40px;
        font-weight: bold;
        display: none;
      }
    </style>
  </head>
  <body onclick="PlayAudio()" style="margin: 0px; overflow: hidden;">
    <div id="score">Puntaje: 0</div>
    <div id="message">Felicidades, has terminado el juego</div>

    <a-scene embedded arjs="detectionMode: mono_and_matrix; matrixCodeType: 3x3_HAMMING63;"
      renderer="logarithmicDepthBuffer: true;"
      vr-mode-ui="enabled: false"
      gesture-detector>
      
      <model-viewer
        gltf-model="/dancing_alien/scene.gltf"
        camera-controls
        auto-rotate
        autoplay
        ar
        shadow-intensity="1"
        exposure="0.8"
        alt="A 3D model of a robot">
      </model-viewer>

      <a-marker type="barcode" value="0" id="marker-0">
        <a-entity
          position="0 0 0"
          scale="0.3 0.3 0.3"
          rotation="270 90 270"
          gltf-model="/img/princess_peach_-_in_process.glb"
          gesture-handler>
        </a-entity>
      </a-marker>

      <a-marker type="barcode" value="1" id="marker-1">
        <a-entity
          position="0 0 0"
          rotation="240 0 0"
          scale="1 1 1"
          gltf-model="/img/toad_super_mario_bros.glb"
          gesture-handler
          autoplay
          camera-controls>
        </a-entity>
      </a-marker>

      <a-marker type="barcode" value="2" id="marker-2">
        <a-entity
          position="0 0 0"
          scale="0.15 0.15 0.15"
          rotation="-90 0 0"
          gltf-model="/img/bowser.glb"
          gesture-handler>
        </a-entity>
      </a-marker>
     

      <a-marker type="barcode" value="3" id="marker-3">
        <a-entity
          position="0 0 0"
          scale="0.3 0.3 0.3"
          rotation="-90 0 0"
          gltf-model="/img/mario_bros_1.2v.glb"
          gesture-handler>
        </a-entity>
      </a-marker>

      <a-marker type="barcode" value="6" id="marker-6">
        <a-entity
        position="0 0 0"
        scale="0.4 0.4 0.4"
        rotation="-90 0 0"
        gltf-model="/img/luigi_-_super_mario_bros.glb"
          gesture-handler>
        </a-entity>
      </a-marker>

      <a-marker type="barcode" value="4" id="marker-4">
        <a-entity
        position="0 0 0"
          scale="0.15 0.15 0.15"
          rotation="-90 0 0"
          gltf-model="/img/bowser.glb"
          gesture-handler>
        </a-entity>
      </a-marker>

      <a-marker type="barcode" value="5" id="marker-5">
        <a-entity
        position="0 0 0"
        scale="0.15 0.15 0.15"
        rotation="-90 0 0"
        gltf-model="/img/mario_kart_8_deluxe_-_donkey_kong.glb"
          gesture-handler>
        </a-entity>
      </a-marker>


      <a-entity camera></a-entity>

      <audio id="musica1" loop>
        <source src="/img/Floating Also - William Rosati.mp3" type="audio/mpeg">
      </audio>

      <script>
        let score = 0;
        const scoreElement = document.getElementById('score');
        const messageElement = document.getElementById('message');
        const detectedMarkers = new Set();

        function PlayAudio() {
          document.getElementById("musica1").play();
        }

        window.onload = function() {
          document.getElementById("musica1").play();
        }

        // Function to update score
        function updateScore(markerId) {
          if (!detectedMarkers.has(markerId)) {
            detectedMarkers.add(markerId);
            score++;
            scoreElement.innerText = `Puntaje: ${score}`;
            if (score === 6) {
              messageElement.style.display = 'block';
            }
          }
        }

        // Adding event listeners to each marker
        document.querySelectorAll('a-marker').forEach(marker => {
          marker.addEventListener('markerFound', () => {
            updateScore(marker.id);
          });
        });
      </script>
    </a-scene>
  </body>
</html>


